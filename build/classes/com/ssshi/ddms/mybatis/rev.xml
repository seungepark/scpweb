<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper      
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"      
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssshi.ddms.mybatis.dao.RevDaoI">

	<select id="getSchedulerInfo" parameterType="int" resultType="schedulerInfoBean">
		SELECT UID, HULLNUM, SHIPTYPE, DESCRIPTION, OWNER, DEPARTMENT, SDATE, EDATE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE,
			STATUS, SCHEDTYPE, SCHECREWSDATE, SCHECREWPERIOD, SCHEDULERVERSIONINFOUID, REVNUM, TRIALKEY, KEYNO, ISOFF, OFFBY, OFFDATE
		FROM SCHEDULERINFO
		WHERE UID = #{uid}
	</select>

	<select id="getSchedulerVersionInfo" parameterType="int" resultType="schedulerVersionInfoBean">
		SELECT UID, PLANREVNUM, EXECREVNUM, COMPREVNUM, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHEDULERVERSIONINFO
		WHERE UID = #{uid}
	</select>

	<select id="getSchedulerDetailList" parameterType="int" resultType="scheDetailInfoBean">
		SELECT UID, SCHEDINFOUID, CATEGORY, TCNUM, DESCRIPTION, CTYPE, LOADRATE, DTYPE, 
			CASE WHEN SDATE = '0000-00-00' THEN '0000-00-00' ELSE SDATE END AS SDATE, STIME, 
			CASE WHEN EDATE = '0000-00-00' THEN '0000-00-00' ELSE EDATE END AS EDATE, ETIME, 
			SEQ, PER, NOTE,
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE, READYTIME, CODEDETUID, SAMETCNUM, 
			PERFORMANCESDATE, PERFORMANCESTIME, PERFORMANCEEDATE, PERFORMANCEETIME, CODEDETTCNUM, CODEDETDESC
		FROM SCHEDULERDETAIL
		WHERE SCHEDINFOUID = #{schedulerInfoUid}
	</select>

	<select id="getScheDatetimeList" parameterType="int" resultType="scheDateTimeBean">
		SELECT UID, SCHEDULERDETAILUID, STARTDATE, STARTTIME, ENDDATE, ENDTIME, KIND, REVDATE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHEDATETIME
		WHERE SCHEDULERDETAILUID IN (SELECT UID FROM SCHEDULERDETAIL WHERE SCHEDINFOUID = #{schedulerInfoUid})
	</select>

	<select id="getScheTrialInfo" parameterType="int" resultType="scheTrialInfoBean">
		SELECT UID, SCHEDULERINFOUID, TRIAL1SCHEDULERINFOUID, TRIAL2SCHEDULERINFOUID, 
			ITPTOTALREMAIN, ITPTOTALBASE, ITPTRIALREMAIN, ITPTRIALBASE, ITPOUTFITTINGREMAIN, ITPOUTFITTINGBASE, 
			PUNCHTOTAL, PUNCHTRIAL, PUNCHOUTFITTING,
			FUELHFOSCHEDULER, FUELHFOPERFORMANCE, FUELHFOTEMP, FUELHFOUP, FUELHFODOWN, 
			FUELMGOSCHEDULER, FUELMGOPERFORMANCE, FUELMGOTEMP, FUELMGOUP, FUELMGODOWN, 
			FUELMDOSCHEDULER, FUELMDOPERFORMANCE, FUELMDOTEMP, FUELMDOUP, FUELMDODOWN, 
			FUELLNGSCHEDULER, FUELLNGPERFORMANCE, FUELLNGTEMP, FUELLNGUP, FUELLNGDOWN, 
			DRAFTFWDSCHEDULER, DRAFTFWDPERFORMANCE, DRAFTFWDTEMP, DRAFTFWDUP, DRAFTFWDDOWN, 
			DRAFTMIDSCHEDULER, DRAFTMIDPERFORMANCE, DRAFTMIDTEMP, DRAFTMIDUP, DRAFTMIDDOWN, 
			DRAFTAFTSCHEDULER, DRAFTAFTPERFORMANCE, DRAFTAFTTEMP, DRAFTAFTUP, DRAFTAFTDOWN, 
			CREWREMARK, REMARK, CONTRACTSPEED, MEASURESPEED, COMPREMARK, NOISEVIBRATION, TRIALSTATUS, ONGOCHANGEDATE,
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHETRIALINFO
		WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</select>

	<select id="getScheCrewList" parameterType="int" resultType="scheCrewBean">
		SELECT UID, SCHEDULERINFOUID, KIND, COMPANY, DEPARTMENT, NAME, RANK, IDNO, WORKTYPE1, WORKTYPE2, 
			MAINSUB, FOODSTYLE, PERSONNO, PHONE, ISPLAN, ISNONE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHECREW
		WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</select>

	<select id="getScheCrewInOutList" parameterType="int" resultType="scheCrewInOutBean">
		SELECT UID, SCHECREWUID, INOUTDATE, SCHEDULERINOUT, PERFORMANCEINOUT, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHECREWINOUT
		WHERE SCHECREWUID IN (SELECT UID FROM SCHECREW WHERE SCHEDULERINFOUID = #{schedulerInfoUid})
	</select>

	<select id="getScheTcNoteList" parameterType="int" resultType="scheTcNoteBean">
		SELECT UID, SCHEDULERINFOUID, SCHEDULERDETAILUID, CODEKIND, CODE, STARTDATE, ENDDATE, REMARK, ISREPORT, 
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE
		FROM SCHETCNOTE
		WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</select>

	<select id="getScheTcNoteFileInfoList" parameterType="int" resultType="scheTcNoteFileInfoBean">
		SELECT UID, SCHEDULERINFOUID, SCHETCNOTEUID, FILENAME, SAVENAME, FILESIZE, FILETYPE, INSERTBY, INSERTDATE
		FROM SCHETCNOTEFILEINFO
		WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</select>

	<select id="getScheTcNoteTcInfoList" parameterType="int" resultType="scheTcNoteTcInfoBean">
		SELECT UID, SCHEDULERINFOUID, SCHETCNOTEUID, SCHEDULERDETAILUID, INSERTBY, INSERTDATE
		FROM SCHETCNOTETCINFO
		WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</select>

	<insert id="insertSchedulerInfo"  parameterType="schedulerInfoBean">
		INSERT INTO REVSCHEDULERINFO (ORGUID, REVKIND, REVDAY, HULLNUM, SHIPTYPE, DESCRIPTION, OWNER, DEPARTMENT, SDATE, EDATE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE,
			STATUS, SCHEDTYPE, SCHECREWSDATE, SCHECREWPERIOD, SCHEDULERVERSIONINFOUID, REVNUM, TRIALKEY, KEYNO, ISOFF, OFFBY, OFFDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{hullnum}, #{shiptype}, #{description}, #{owner}, #{department}, #{sdate}, #{edate}, #{insertBy}, #{insertdate}, #{updateBy}, #{updateDate},
			#{status}, #{schedtype}, #{scheCrewSdate}, #{scheCrewPeriod}, #{schedulerVersionInfoUid}, #{revnum}, #{trialKey}, #{keyNo}, #{isOff}, #{offBy}, #{offDate})
	</insert>

	<insert id="insertSchedulerVersionInfo" parameterType="schedulerVersionInfoBean">
		INSERT INTO REVSCHEDULERVERSIONINFO (ORGUID, REVKIND, REVDAY, PLANREVNUM, EXECREVNUM, COMPREVNUM, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{planRevNum}, #{execRevNum}, #{compRevNum}, #{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertSchedulerDetail" parameterType="scheDetailInfoBean">
		INSERT INTO REVSCHEDULERDETAIL (ORGUID, REVKIND, REVDAY, SCHEDINFOUID, CATEGORY, TCNUM, DESCRIPTION, 
			CTYPE, LOADRATE, DTYPE, SDATE, STIME, EDATE, ETIME, SEQ, PER, NOTE,
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE, READYTIME, CODEDETUID, SAMETCNUM, 
			PERFORMANCESDATE, PERFORMANCESTIME, PERFORMANCEEDATE, PERFORMANCEETIME, CODEDETTCNUM, CODEDETDESC)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedinfouid}, #{category}, #{tcnum}, #{description},
			#{ctype}, #{loadrate}, #{dtype}, #{sdate}, #{stime}, #{edate}, #{etime}, #{seq}, #{per}, #{note},
			#{insertBy}, #{insertDate}, #{updateBy}, #{updateDate}, #{readytime}, #{codedetuid}, #{sametcnum},
			#{performancesdate}, #{performancestime}, #{performanceedate}, #{performanceetime}, #{codedettcnum}, #{codedetdesc})
	</insert>

	<insert id="insertScheDatetime" parameterType="scheDateTimeBean">
		INSERT INTO REVSCHEDATETIME (ORGUID, REVKIND, REVDAY, SCHEDULERDETAILUID, STARTDATE, STARTTIME, ENDDATE, ENDTIME, KIND, REVDATE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerDetailUid}, #{startDate}, #{startTime}, #{endDate}, #{endTime}, #{kind}, #{revDate}, #{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertScheTrialInfo" parameterType="scheTrialInfoBean">
		INSERT INTO REVSCHETRIALINFO (ORGUID, REVKIND, REVDAY, SCHEDULERINFOUID, TRIAL1SCHEDULERINFOUID, TRIAL2SCHEDULERINFOUID, 
			ITPTOTALREMAIN, ITPTOTALBASE, ITPTRIALREMAIN, ITPTRIALBASE, ITPOUTFITTINGREMAIN, ITPOUTFITTINGBASE, 
			PUNCHTOTAL, PUNCHTRIAL, PUNCHOUTFITTING,
			FUELHFOSCHEDULER, FUELHFOPERFORMANCE, FUELHFOTEMP, FUELHFOUP, FUELHFODOWN, 
			FUELMGOSCHEDULER, FUELMGOPERFORMANCE, FUELMGOTEMP, FUELMGOUP, FUELMGODOWN, 
			FUELMDOSCHEDULER, FUELMDOPERFORMANCE, FUELMDOTEMP, FUELMDOUP, FUELMDODOWN, 
			FUELLNGSCHEDULER, FUELLNGPERFORMANCE, FUELLNGTEMP, FUELLNGUP, FUELLNGDOWN, 
			DRAFTFWDSCHEDULER, DRAFTFWDPERFORMANCE, DRAFTFWDTEMP, DRAFTFWDUP, DRAFTFWDDOWN, 
			DRAFTMIDSCHEDULER, DRAFTMIDPERFORMANCE, DRAFTMIDTEMP, DRAFTMIDUP, DRAFTMIDDOWN, 
			DRAFTAFTSCHEDULER, DRAFTAFTPERFORMANCE, DRAFTAFTTEMP, DRAFTAFTUP, DRAFTAFTDOWN, 
			CREWREMARK, REMARK, CONTRACTSPEED, MEASURESPEED, COMPREMARK, NOISEVIBRATION, TRIALSTATUS, ONGOCHANGEDATE,
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerInfoUid}, #{trial1SchedulerInfoUid}, #{trial2SchedulerInfoUid},
			#{itpTotalRemain}, #{itpTotalBase}, #{itpTrialRemain}, #{itpTrialBase}, #{itpOutfittingRemain}, #{itpOutfittingBase},
			#{punchTotal}, #{punchTrial}, #{punchOutfitting},
			#{fuelHfoScheduler}, #{fuelHfoPerformance}, #{fuelHfoTemp}, #{fuelHfoUp}, #{fuelHfoDown},
			#{fuelMgoScheduler}, #{fuelMgoPerformance}, #{fuelMgoTemp}, #{fuelMgoUp}, #{fuelMgoDown},
			#{fuelMdoScheduler}, #{fuelMdoPerformance}, #{fuelMdoTemp}, #{fuelMdoUp}, #{fuelMdoDown},
			#{fuelLngScheduler}, #{fuelLngPerformance}, #{fuelLngTemp}, #{fuelLngUp}, #{fuelLngDown},
			#{draftFwdScheduler}, #{draftFwdPerformance}, #{draftFwdTemp}, #{draftFwdUp}, #{draftFwdDown},
			#{draftMidScheduler}, #{draftMidPerformance}, #{draftMidTemp}, #{draftMidUp}, #{draftMidDown},
			#{draftAftScheduler}, #{draftAftPerformance}, #{draftAftTemp}, #{draftAftUp}, #{draftAftDown},
			#{crewRemark}, #{remark}, #{contractSpeed}, #{measureSpeed}, #{compRemark}, #{noiseVibration}, #{trialStatus}, #{ongoChangeDate},
			#{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertScheCrew" parameterType="scheCrewBean">
		INSERT INTO REVSCHECREW (ORGUID, REVKIND, REVDAY, SCHEDULERINFOUID, KIND, COMPANY, DEPARTMENT, NAME, RANK, IDNO, WORKTYPE1, WORKTYPE2, 
			MAINSUB, FOODSTYLE, PERSONNO, PHONE, ISPLAN, ISNONE, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerInfoUid}, #{kind}, #{company}, #{department}, #{name}, #{rank}, #{idNo}, #{workType1}, #{workType2},
			#{mainSub}, #{foodStyle}, #{personNo}, #{phone}, #{isPlan}, #{isNone}, #{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertScheCrewInOut" parameterType="scheCrewInOutBean">
		INSERT INTO REVSCHECREWINOUT (ORGUID, REVKIND, REVDAY, SCHECREWUID, INOUTDATE, SCHEDULERINOUT, PERFORMANCEINOUT, INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{scheCrewUid}, #{inOutDate}, #{schedulerInOut}, #{performanceInOut}, #{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertScheTcNote" parameterType="scheTcNoteBean">
		INSERT INTO REVSCHETCNOTE (ORGUID, REVKIND, REVDAY, SCHEDULERINFOUID, SCHEDULERDETAILUID, CODEKIND, CODE, STARTDATE, ENDDATE, REMARK, ISREPORT, 
			INSERTBY, INSERTDATE, UPDATEBY, UPDATEDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerInfoUid}, #{schedulerDetailUid}, #{codeKind}, #{code}, #{startDate}, #{endDate}, #{remark}, #{isReport},
			#{insertBy}, #{insertDate}, #{updateBy}, #{updateDate})
	</insert>

	<insert id="insertScheTcNoteFileInfo" parameterType="scheTcNoteFileInfoBean">
		INSERT INTO REVSCHETCNOTEFILEINFO (ORGUID, REVKIND, REVDAY, SCHEDULERINFOUID, SCHETCNOTEUID, FILENAME, SAVENAME, FILESIZE, FILETYPE, INSERTBY, INSERTDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerInfoUid}, #{scheTcNoteUid}, #{fileName}, #{saveName}, #{fileSize}, #{fileType}, #{insertBy}, #{insertDate})
	</insert>

	<insert id="insertScheTcNoteTcInfo" parameterType="scheTcNoteTcInfoBean">
		INSERT INTO REVSCHETCNOTETCINFO (ORGUID, REVKIND, REVDAY, SCHEDULERINFOUID, SCHETCNOTEUID, SCHEDULERDETAILUID, INSERTBY, INSERTDATE)
		VALUES (#{uid}, #{revKind}, #{revDay}, #{schedulerInfoUid}, #{scheTcNoteUid}, #{schedulerDetailUid}, #{insertBy}, #{insertDate})
	</insert>
	
	<delete id="deleteScheTcNoteTcInfo" parameterType="int">
		DELETE FROM REVSCHETCNOTETCINFO WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteScheTcNoteFileInfo" parameterType="int">
		DELETE FROM REVSCHETCNOTEFILEINFO WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteScheTcNote" parameterType="int">
		DELETE FROM REVSCHETCNOTE WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteScheCrewInOut" parameterType="int">
		DELETE FROM REVSCHECREWINOUT WHERE SCHECREWUID IN (SELECT ORGUID FROM REVSCHECREW WHERE SCHEDULERINFOUID = #{schedulerInfoUid})
	</delete>
	
	<delete id="deleteScheCrew" parameterType="int">
		DELETE FROM REVSCHECREW WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteScheTrialInfo" parameterType="int">
		DELETE FROM REVSCHETRIALINFO WHERE SCHEDULERINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteScheDatetime" parameterType="int">
		DELETE FROM REVSCHEDATETIME WHERE SCHEDULERDETAILUID IN (SELECT ORGUID FROM REVSCHEDULERDETAIL WHERE SCHEDINFOUID = #{schedulerInfoUid})
	</delete>
	
	<delete id="deleteSchedulerDetail" parameterType="int">
		DELETE FROM REVSCHEDULERDETAIL WHERE SCHEDINFOUID = #{schedulerInfoUid}
	</delete>
	
	<delete id="deleteSchedulerVersionInfo" parameterType="int">
		DELETE FROM REVSCHEDULERVERSIONINFO WHERE ORGUID IN (SELECT SCHEDULERVERSIONINFOUID FROM REVSCHEDULERINFO WHERE ORGUID = #{schedulerInfoUid})
	</delete>
	
	<delete id="deleteSchedulerInfo" parameterType="int">
		DELETE FROM REVSCHEDULERINFO WHERE ORGUID = #{schedulerInfoUid}
	</delete>
</mapper>